{"version":3,"sources":["main.js"],"names":["window","addEventListener","init","time","score","isPlaying","scoreStorage","localStorage","wordInput","document","querySelector","currentWord","scoreDisplay","scoreText","timeDisplay","message","feedback","seconds","skyldheitiDisplay","wordDict","isValid","getItem","innerHTML","showWord","matchWords","fetch","then","response","json","word","frumfletta","skyldflettur","notendaord","frum","catch","err","console","log","e","key","value","result","is_valid","timeOut","skyld","includes","setItem","className","userdata","setTimeout","location","reload","displaySkyldheiti"],"mappings":"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","file":"main.1f19ae8e.map","sourceRoot":"..","sourcesContent":["// Basic game structure based on Brad Traversy's speed-typing game tutorial: https://www.youtube.com/watch?v=Yw-SYSG-028\n\nwindow.addEventListener('load', init);\n\n// Global scope variables\nlet time = 10;\nlet score = 0;\nlet isPlaying;\nscoreStorage = window.localStorage;\n\n// DOM elements\nconst wordInput = document.querySelector('#word-input')\nconst currentWord = document.querySelector('#current-word')\nconst scoreDisplay = document.querySelector('#score')\nconst scoreText = document.querySelector('#scoreText')\nconst timeDisplay = document.querySelector('#time')\nconst message = document.querySelector('#message')\nconst feedback = document.querySelector('#feedback')\nconst seconds = document.querySelector('#seconds')\nconst skyldheitiDisplay = document.querySelector('#skyldheiti')\nvar wordDict = {}\nvar isValid;\n\n// Initialize Game\nfunction init() {\n  // getting user score from local storage\n  score = scoreStorage.getItem(\"userScore\");\n  if (score >= 1) {\n      scoreDisplay.innerHTML = score;\n  }\n  else {\n      scoreDisplay.innerHTML = \"0\";\n  }\n  // display random word\n  showWord(wordDict);\n  // check typed words - waiting for user to press enter\n  matchWords(wordDict);\n}\n\n// match word to skyldheiti\n// random index word\nfunction showWord(wordDict) {\n  fetch('http://localhost:5042/skyldflettur')\n  .then(function(response) {\n    return response.json();\n  })\n  .then(word => {\n    wordDict[\"frum\"] = word.frumfletta;\n    wordDict[\"skyld\"] = word.skyldflettur;\n    // contains the count\n    wordDict[\"userdata\"] = word.notendaord;\n\n    currentWord.innerHTML = wordDict.frum;\n    return wordDict;\n  }).catch(err => {\n    console.log(\"Error fetching word from server.\")\n  });\n}\n\nfunction matchWords(wordDict) {\n  wordInput.addEventListener('keypress', function (e) {\n    if (e.key === 'Enter') {\n      if (!wordInput.value) {\n        return;\n      }\n      //for cheating:\n      //console.log(wordDict)\n\n      fetch(`http://localhost:5042/userword/${wordInput.value}+${wordDict.frum}`)\n      .then(function(response) {\n        return response.json();\n      })\n      .then(result => {\n        isValid = result.is_valid;\n        return isValid;\n      })\n      .then(isValid => {\n        var timeOut = 1400;\n        if (wordDict.skyld.includes(wordInput.value)) {\n          wordInput.value = '';\n          score++;\n          scoreStorage.setItem(\"userScore\", score);\n          score = scoreStorage.getItem(\"userScore\");\n          feedback.className=\"green-text\";\n          feedback.innerHTML = \"Já, þetta er á skrá sem skyldheiti!\";\n        }\n\n        else if (wordDict.userdata[wordInput.value]) {\n          feedback.className=\"purple-text\";\n          if (wordDict.userdata[wordInput.value] == 1) {\n            feedback.innerHTML = `${wordDict.userdata[wordInput.value]} annar hefur skrifað þetta orð!`;\n          }\n          else {\n            feedback.innerHTML = `${wordDict.userdata[wordInput.value]} aðrir hafa skrifað þetta orð!`;\n          }\n        }\n        else if (isValid) {\n          wordInput.value = '';\n          feedback.className=\"blue-text\";\n          feedback.innerHTML = 'Áhugavert orð, við skráum það niður';\n        }\n\n        // TODO someday: multi-word inputs not in skyldheiti\n        else {\n          wordInput.value = '';\n          feedback.className=\"red-text\";\n          feedback.innerHTML = \"Þetta er nú eitthvað skrýtið orð.\"\n        }\n\n        setTimeout(function() {\n          feedback.innerHTML = \"\";\n          window.location.reload(true);\n        }, timeOut);\n      })\n    }\n  })\n}\n\nfunction displaySkyldheiti() {\n  return skyldheitiDisplay.innerHTML = wordDict.skyld;\n}\n\n"]}